<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Santa Rita | Admin Panel</title>
  <link rel="stylesheet" href="../../main/css/restaurant.css">
  <link rel="stylesheet" href="../../main/css/navbar.css">
  <link rel="stylesheet" href="../../main/css/hero.css">
  <link rel="stylesheet" href="../../main/css/menu-categories.css">
  <link rel="stylesheet" href="../../main/css/featured-items.css">
  <link rel="stylesheet" href="../../main/css/testimonials.css">
  <link rel="stylesheet" href="../../main/css/footer.css">
  <link rel="stylesheet" href="../../main/css/buttons.css">
  <link rel="stylesheet" href="../../main/css/notifications.css">
  <link rel="stylesheet" href="../../main/css/admin.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Montserrat:wght@400;500;600&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <header class="navbar">
      <!-- Logo on left -->
      <img src="../../images/logo2.jpg" alt="Restaurant Logo" class="logo">
    
      <!-- Navigation links on right -->
      <div class="nav-right">
        <div class="nav-links">
          <a href="../../main/index.html" class="nav-link">Home</a>
          <a href="" class="nav-link">Contact</a>
          <a href="../../components/about-us/AboutUS.html" class="nav-link">About</a>
          <a href="../cart/cart.html" class="cart-link">
            <img src="../../images/download-removebg-preview.png" alt="Cart" class="cart-icon">
          </a>
        </div>
      </div>
    </header>

  <main class="admin-container">
    <div class="admin-header">
      <h1><i class="fas fa-utensils"></i> Menu Management</h1>
      <p class="admin-subtitle">Add, edit, or remove items from your menu</p>
    </div>

    <div class="admin-content">
      <div class="admin-card">
        <div class="form-group">
          <label for="categorySelect">Select Category</label>
          <select id="categorySelect" class="form-control" onchange="loadCategoryItems()">
            <option value="">Choose Category</option>
            <option value="burger">Artisan Burgers</option>
            <option value="pizza">Wood-Fired Pizzas</option>
            <option value="crepe">French CrÃªpes</option>
          </select>
        </div>

        <div id="itemsContainer" class="menu-items-container"></div>

        <div class="add-item-form">
          <h2><i class="fas fa-plus-circle"></i> Add New Item</h2>
          <div class="form-group">
            <input type="text" id="newName" class="form-control" placeholder="Item Name">
          </div>
          <div class="form-group">
            <textarea id="newDesc" class="form-control" placeholder="Description" rows="3"></textarea>
          </div>
          <div class="form-group file-upload">
            <input type="file" id="newImg" accept="image/*" style="display: none;">
            <label for="newImg" class="custom-file-btn">
              <i class="fas fa-image"></i> Choose Image
            </label>
            <span id="file-name">No file chosen</span>
          </div>
          <button onclick="addNewItem()" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add Item
          </button>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-about">
        <h3>Santa Rita</h3>
        <p>
          Crafting memorable dining experiences with locally-sourced
          ingredients and traditional techniques since 2012.
        </p>
      </div>

      <div class="footer-hours">
        <h3>Admin Tools</h3>
        <ul class="footer-links">
          <li><a href="#">Menu Management</a></li>
          <li><a href="#">Reservations</a></li>
          <li><a href="#">Orders</a></li>
        </ul>
      </div>

      <div class="footer-contact">
        <h3>Contact</h3>
        <ul class="footer-links">
          <li>123 fathy street</li>
          <li>bors3eed City, GC 12345</li>
          <li>01227624045</li>
          <li>admin@SantaRita.com</li>
        </ul>
      </div>
    </div>

    <div class="copyright">
      <p>&copy; 2025 Santa Rita. All rights reserved.</p>
    </div>
  </footer>

  <script>
    function loadCategoryItems() {
      const category = document.getElementById("categorySelect").value;
      const container = document.getElementById("itemsContainer");
      container.innerHTML = "";

      if (!category) {
        container.innerHTML = '<p class="empty-message">Please select a category to view items</p>';
        return;
      }

      const items = JSON.parse(localStorage.getItem("foodItems")) || [];
      const filtered = items.filter(item => item.category === category);

      if (filtered.length === 0) {
        container.innerHTML = '<p class="empty-message">No items found in this category</p>';
        return;
      }

      filtered.forEach((item, index) => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "menu-item";
        itemDiv.innerHTML = `
          <div class="item-image">
            <img src="${item.image}" alt="${item.name}">
          </div>
          <div class="item-details">
            <h3>${item.name}</h3>
            <p>${item.description}</p>
          </div>
          <button class="btn btn-danger" onclick="removeItem('${category}', '${item.name}')">
            <i class="fas fa-trash-alt"></i> Remove
          </button>
        `;
        container.appendChild(itemDiv);
      });
    }

    function addNewItem() {
      const category = document.getElementById("categorySelect").value;
      const name = document.getElementById("newName").value;
      const description = document.getElementById("newDesc").value;
      const imageInput = document.getElementById("newImg");

      if (!name || !description || !imageInput.files[0] || !category) {
        showNotification("Please fill all fields and select a category.", "error");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (event) {
        const image = event.target.result;

        let items = JSON.parse(localStorage.getItem("foodItems")) || [];
        items.push({ name, description, image, category });
        localStorage.setItem("foodItems", JSON.stringify(items));

        showNotification("Item added successfully!", "success");
        loadCategoryItems();

        // Reset form
        document.getElementById("newName").value = "";
        document.getElementById("newDesc").value = "";
        document.getElementById("newImg").value = "";
        document.getElementById("file-name").textContent = "No file chosen";
      };
      reader.readAsDataURL(imageInput.files[0]);
    }

    function removeItem(category, name) {
      if (confirm("Are you sure you want to remove this item?")) {
        let items = JSON.parse(localStorage.getItem("foodItems")) || [];
        items = items.filter(item => !(item.category === category && item.name === name));
        localStorage.setItem("foodItems", JSON.stringify(items));
        showNotification("Item removed successfully!", "success");
        loadCategoryItems();
      }
    }

    function showNotification(message, type) {
      const notification = document.createElement("div");
      notification.className = `notification ${type}`;
      notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
        ${message}
      `;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.classList.add("show");
        setTimeout(() => {
          notification.classList.remove("show");
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }, 10);
    }

    document.getElementById("newImg").addEventListener("change", function () {
      const fileName = this.files[0]?.name || "No file chosen";
      document.getElementById("file-name").textContent = fileName;
    });

    // Initialize with empty state
    loadCategoryItems();
  </script>
</body>

</html>